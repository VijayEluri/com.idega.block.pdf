<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.core']['style/iw_core.css']}"/>
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.block.pdf']['style/editor.css']}"/>
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.block.pdf']['style/source_editor.css']}"/>
    <script
        type="text/javascript"
        src="http://code.jquery.com/jquery-1.11.0.js"/>
    <script 
        type="text/javascript"
        src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/editArea/edit_area_full.js']}"
        charset="UTF-8"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/editArea/langs/en.js']}" 
        charset="UTF-8"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/editArea/reg_syntax/xml.js']}" 
        charset="UTF-8"/>
    <script>
        editAreaLoader.init({
    		id:					"editorForm:sourceCode",
    		language:			"en",
    		syntax:				"xml",
    		toolbar:			"undo, redo",
    		allow_toggle:		false,
    		start_highlight:	true,
			show_line_colors:	true,
			min_width:			650
    	});
    </script>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.core']['iw_core.js']}"/>
    <!-- <script 
        type="text/javascript"
        src="#{iwResourceResolver['is.idega.idegaweb.golf']['javascript/warningMessageEditorHelper.js']}"/> -->
    <!-- <script type="text/javascript">
        WarningMessageEditorHelper.FIELD_IS_REQUIRED = "#{localizedStrings['is.idega.idegaweb.golf']['field_is_required']}";
        WarningMessageEditorHelper.SAVING = "#{localizedStrings['is.idega.idegaweb.golf']['saving']}";
    </script> -->
    <h:outputText
        rendered="#{iTextDocument.submitted}"
        styleClass="savedText"
        value="#{localizedStrings['com.idega.block.pdf']['saved']}"/>
    <h:form
        rendered="#{not iTextDocument.submitted}"
        id="editorForm">
        <h:panelGrid
            columns="2"
            styleClass="editorTable">
            <h:panelGroup>
                <h:outputLabel
                    for="category"
                    value="#{localizedStrings['com.idega.block.pdf']['process_definition']}"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:selectOneMenu
                    id="category"
                    value="#{iTextDocument.processDefinitionId}"
                    valueChangeListener="#{iTextDocument.selectedProcessDefinitionIdChange}"
                    onchange="showLoadingMessage('Loading'); submit();">
                    <f:selectItem
                        itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                        itemValue="-1"/>
                    <f:selectItems
                        value="#{iTextDocumentsService.processDefinitionNames}"/>
                </h:selectOneMenu>
            </h:panelGroup>
            <h:panelGroup>
                <h:outputLabel
                    for="sourceCode"
                    value="#{localizedStrings['com.idega.block.pdf']['source_code']}"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:inputTextarea
                    id="sourceCode"
                    value="#{iTextDocument.documentSource}"
                    styleClass="sourceEditorArea"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:inputHidden
                    id="prm_id"
                    value="#{iTextDocument.id}"/>
                <h:inputHidden
                    id="oldProcessDefinitionId"
                    value="#{iTextDocument.oldProcessDefinitionId}"/>
            </h:panelGroup>
            <h:panelGroup>
                <h:commandButton
                    id="saveButton"
                    value="#{localizedStrings['com.idega.block.pdf']['save']}"
                    action="#{iTextDocument.save}"/>
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
</div>