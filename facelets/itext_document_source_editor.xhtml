<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.core']['style/iw_core.css']}"/>
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.block.pdf']['style/editor.css']}"/>
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.block.web2.0']['javascript/fancybox/2.1.4/fancybox.css']}"/>
    <link 
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.block.pdf']['style/source_editor.css']}"/>
    <script
        type="text/javascript"
        src="http://code.jquery.com/jquery-1.11.0.js"/>
    <script 
        type="text/javascript"
        src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.11.1/jquery.validate.min.js"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/editArea/edit_area_full.js']}"
        charset="UTF-8"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/editArea/langs/en.js']}" 
        charset="UTF-8"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/editArea/reg_syntax/xml.js']}" 
        charset="UTF-8"/>
    <script 
        type="text/javascript"
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/jquery-plugins/jquery.easing.js']}"/>
    <script 
        type="text/javascript"
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/fancybox/2.1.4/fancybox.js']}"/>
    <script 
        type="text/javascript"
        src="#{iwResourceResolver['com.idega.block.web2.0']['javascript/fancybox/2.1.4/helpers/jquery.fancybox-media.js']}"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.core']['iw_core.js']}"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.block.pdf']['javascript/source_editor.js']}"/>
    <h:outputText
        rendered="#{iTextDocument.submitted}"
        styleClass="savedText"
        value="#{localizedStrings['com.idega.block.pdf']['saved']}"/>
    <h:form
        id="editorForm">
        <table
            class="editorTable">
            <ui:repeat 
                id="groups"
                value="#{documentURIFilterBean.groups}" 
                var="group"><tr>
                    <td>
                        <h:outputLabel
                            for="typeId"
                            value="#{group.name}"/>
                    </td>
                    <td>
                        <h:selectOneMenu
                            id="typeId"
                            value="#{group.selectedTypeId}"
                            valueChangeListener="#{group.selectedTypeIdChange}"
                            onchange="showLoadingMessage('Loading'); submit();"
                            styleClass="#{group.id}">
                            <f:selectItem
                                itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                                noSelectValue="true"/>
                            <f:selectItems
                                value="#{group.typesMap}"/>
                        </h:selectOneMenu>
                    </td>
                </tr>
            </ui:repeat>
            <h:panelGroup
                rendered="#{iTextDocument.multiple}">
            <tr>
                <td>
                    <h:outputLabel
                        for="prm_id"
                        value="#{localizedStrings['com.idega.block.pdf']['repository_uri']}"/>
                </td>
                <td>
                    <h:selectOneMenu
                        id="id"
                        value="#{iTextDocument.id}"
                        valueChangeListener="#{iTextDocument.selectedIdChange}"
                        onchange="showLoadingMessage('Loading'); submit();">
                        <f:selectItem
                            itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                            noSelectValue="true"/>
                        <f:selectItems
                            value="#{iTextDocument.entitiesMap}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
            </h:panelGroup>
            <tr>
                <td>
                    <h:outputLabel
                        for="helpText"
                        value="#{localizedStrings['com.idega.block.pdf']['tags']}"/>
                </td>
                <td>
                    <h:outputText 
                        id="helpText" 
                        value="${'${dateFrom}, ${fisheryName}, ${fisheryAddress}, ${fishingAreaName}, ${fisheryPersonalID}, ${fisheryPostal}, ${shipID}, ${shipName}'}"/>
                </td>
            </tr>
        </table>
        <h:inputTextarea
            id="sourceCode"
            value="#{iTextDocument.documentSource}"
            styleClass="sourceEditorArea"/>
        <h:panelGrid
            columns="2"
            styleClass="editorTable">
            <h:panelGroup>
                <h:commandButton
                    id="saveButton"
                    value="#{localizedStrings['com.idega.block.pdf']['save']}"
                    action="#{iTextDocument.save}"/>
                <h:outputLink
                    styleClass="windowLink">
                    <input
                        value="#{localizedStrings['com.idega.block.pdf']['preview']}"
                        type="button"
                        class="button"/>
                </h:outputLink>
            </h:panelGroup>
        </h:panelGrid>
    </h:form>
</div>