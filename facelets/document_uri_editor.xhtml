<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<div
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets">
	<link 
		rel="stylesheet"
		type="text/css"
		href="#{iwResourceResolver['com.idega.block.pdf']['style/editor.css']}"/>
    <!-- Core -->
    <link
        rel="stylesheet"
        type="text/css"
        href="#{iwResourceResolver['com.idega.core']['style/iw_core.css']}"/>
    <script 
        type="text/javascript" 
        src="#{iwResourceResolver['com.idega.core']['iw_core.js']}"/>
	<h:outputText
		rendered="#{documentURI.submitted}"
		styleClass="savedText"
		value="#{localizedStrings['com.idega.block.pdf']['saved']}"/>
	<h:form
		rendered="#{not documentURI.submitted}"
		id="editorForm">
        <table
            id="editorTable"
			class="editorTable">
            <tr>
                <td>
                    <h:outputLabel
                        for="bundle"
                        value="#{localizedStrings['com.idega.block.pdf']['bundle']}"/>
                </td>
                <td>
                    <h:selectOneMenu
                        id="bundle"
                        value="#{documentURI.bundlePath}"
                        valueChangeListener="#{documentURI.selectedBundlePathChange}"
                        onchange="showLoadingMessage('Loading'); submit();">
                        <f:selectItem
                            itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                            noSelectValue="true"/>
                        <f:selectItems
                            value="#{iTextDocumentsService.bundlePathsAndNames}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td>
                    <h:outputLabel
                        for="bundleURL"
                        value="#{localizedStrings['com.idega.block.pdf']['bundle_url']}" />
                </td>
                <td>
                    <h:selectOneMenu
                        id="bundleURL"
                        value="#{documentURI.bundleURL}">
                        <f:selectItem
                            itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                            noSelectValue="true" />
                        <f:selectItems
                            value="#{documentURI.bundleURLs}" />
                    </h:selectOneMenu>
                </td>
            </tr>
            <tr>
                <td>
                    <h:outputLabel
                        for="repositoryURI"
                        value="#{localizedStrings['com.idega.block.pdf']['repository_uri']}"/>
                </td>
                <td>
                    <h:selectOneMenu
                        id="repositoryURI"
                        value="#{documentURI.repositoryURI}">
                        <f:selectItem
                            itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                            noSelectValue="true"/>
                        <f:selectItems
                            value="#{documentURIService.repositoryURIs}"/>
                    </h:selectOneMenu>
                </td>
            </tr>
            <ui:repeat 
                id="groups"
                value="#{documentURI.groups}" 
                var="group"><tr>
                    <td>
                        <h:outputLabel
                            for="typeId"
                            value="#{group.name}"/>
                    </td>
                    <td>
                        <h:selectOneMenu
                            id="typeId"
                            value="#{group.selectedTypeId}"
                            styleClass="#{group.id}">
                            <f:selectItem
                                itemLabel="#{localizedStrings['com.idega.block.pdf']['select']}"
                                noSelectValue="true"/>
                            <f:selectItems
                                value="#{group.typesMap}"/>
                        </h:selectOneMenu>
                    </td>
                </tr>
            </ui:repeat>
		</table>
        <h:inputHidden
            id="prm_id"
            value="#{documentURI.id}"/>
        <h:commandButton
            id="saveButton"
            value="#{localizedStrings['com.idega.block.pdf']['save']}"
            action="#{documentURI.save}"/>
	</h:form>
</div>